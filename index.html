<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8"> <!-- Define el tipo de caracteres que se usaran en el documento html -->
	<meta name="keywords" content="lenguajes y compiladores, curso, proyecto, lenguaje de programacion, lc++">
	<!-- palabras clave para posicionamiento en buscadores -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- redimensiona la vista de la pagina web para cada tipo de dispositivo -->
	<title>Proyecto LC ++</title>
	<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<script type="text/javascript">
		//arreglo de palabras reservadas
		var arrayPalabrasReservadas = ["vacio", "VY", "entero", "imprimir", "YV", "para", "mientras",
			"cadena", "sicumple", "boleano", "sino", "decimal", "verdadero",
			"falso", "retornar", "opcion", "caso", "ruptura", "invalido", "hacer"
		];
		//arreglo de simbolos especiales
		var arraySimbolosEspeciales = ["/", "*", "+", "-", ":=", "^", ":<=", ":>=", ":<", ":>", ":!=", "++", ":==", "->"];


		//arreglo de tokens de delimitadores
		//var arrayPretokensDelimitadores;

		$(document).ready(function () {

			//controles de eventos
			$('#resultado-boton').click(function () {

				//	var texto=text.value;
				/*for (var i = 0; i < texto.length; i++) {
					console.log(texto[i]);
				}*/
				//	var tokens1=texto.split(" ");
				//	var tokens2=texto.split(",");
				//	for (var i = 0; i < tokens2.length; i++) {
				//		console.log(tokens2[i]);
				//	}				

				resultado();


			});

			$('#analisisLexico-boton').click(function () {
				analisisLexico();
			});

			$('#analisisSintactico-boton').click(function () {
				analisisSintactico();
			});

			$('#analisisSemantico-boton').click(function () {
				analisisSemantico();
			});

			$('#tablaSimbolos-boton').click(function () {
				tablaSimbolos();
			});

			$('#borrar-boton').click(function () {
				borrarCodigo();
			});




			//Desarrollo de eventos
			//Analisis Lexico
			function analisisLexico() {
				
				var codigoArea_text = $('#codigo');
				var codigoArea = codigoArea_text.val();
				var htmlAnalisisLexico = '';

				//delimitadores
				var separador = "";//para separar en caracteres, incluidos espacios en blanco
				var separador1 = /\s/;//para detectar un espacio en blanco en el codigo ingresado
				var arrayPreToken = codigoArea.split(separador);
				var arrayPreToken1 = codigoArea.split(separador1);
				var longitudArrayPreToken = arrayPreToken.length;
				var longitudArrayPreToken1 = arrayPreToken1.length;
				var arrayPreTokensDelimitadores = [];
				var cont = 0;
				for (var i = 0; i < longitudArrayPreToken; i++) {
					if (arrayPreToken[i] == '(' || arrayPreToken[i] == ')' || arrayPreToken[i] == '{' ||
						arrayPreToken[i] == '}' || arrayPreToken[i] == ';' || arrayPreToken[i] == '[' ||
						arrayPreToken[i] == ']' || arrayPreToken[i] == ',' || arrayPreToken[i] == '.' ||
						arrayPreToken[i] == ':' || arrayPreToken[i] == '"' ) {
						arrayPreTokensDelimitadores[cont] = arrayPreToken[i];

						cont++;
					}
				}
				
				//palabras reservadas
				var arrayErrorTokens = [];
				var arrayPreTokensIdentificadores = [];
				var contI = 0;
				var arrayPreTokensPalabrasReservadas = [];
				var array
				var cont1 = 0;
				//var exVy = /[0-9]VY[a-zA-Z]|[a-zA-Z]VY[0-9]|[0-9]VY[0-9]|[a-zA-Z]VY[a-zA-Z]|[0-9]VY|[A-Za-z]VY|VY[a-zA-Z]|VY[0-9]/;
				var exVy = /.VY(?!\().|.VY|VY(?!\()./;
				var exVy1 = /VY/;
				//var exYv = /[0-9]YV[a-zA-Z]|[a-zA-Z]YV[0-9]|[0-9]YV[0-9]|[a-zA-Z]YV[a-zA-Z]|[0-9]YV|[A-Za-z]YV|YV[a-zA-Z]|YV[0-9]/;
				var exYv = /.YV.|.YV|YV./;
				var exYv1 = /YV/;
				var exEntero = /.entero.|.entero|entero./;
				var exEntero1 = /entero/;
				var exDecimal = /.decimal.|.decimal|decimal./;
				var exDecimal1 = /decimal/;
				var exCadena = /.cadena.|.cadena|cadena./;
				var exCadena1 = /cadena/;
				var exPara = /.para(?!\().|.para|para(?!\()./;
				var exPara1 = /para/;
				var exMientras = /.mientras(?!\().|.mientras|mientras(?!\()./;
				var exMientras1 = /mientras/;
				var exSicumple = /.sicumple(?!\().|.sicumple|sicumple(?!\()./;
				var exSicumple1 = /sicumple/;
				
				/*	var exSino1 = /.sino(?!\{).|.sino|sino(?!\{)./;
					var exSino = /sino/;
					var exVerdadero = /verdadero/;
					var exFalso = /falso/;
					var exRetornar = /retornar/;
					var exOpcion = /opcion/;
					var exCaso = /caso/;
					var exRuptura = /ruptura/;
					var exInvalido = /invalido/;
					var exVacio = /vacio/;
					var exImprimir = /imprimir/;
					var exBoleano = /boleano/;*/
				var exImprimir = /.imprimir(?!\().|.imprimir|imprimir(?!\()./;
				var exImprimir1 = /imprimir/
				for (var i = 0; i < longitudArrayPreToken1; i++) {
					if (exVy.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exVy);
						contI++;
					} else if (exVy1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exVy1);
						cont1++;
					}
					if (exYv.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exYv);
						contI++;
					} else if (exYv1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exYv1);
						cont1++;
					}
					if (exEntero.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exEntero);
						contI++;
					} else if (exEntero1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exEntero1);
						cont1++;
					}
					if (exDecimal.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exDecimal);
						contI++;
					} else if (exDecimal1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exDecimal1);
						cont1++;
					}
					if (exCadena.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exCadena);
						contI++;
					} else if (exCadena1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exCadena1);
						cont1++;
					}
					if (exPara.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exPara);
						contI++;
					} else if (exPara1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exPara1);
						cont1++;
					}
					if (exMientras.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exMientras);
						contI++;
					} else if (exMientras1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exMientras1);
						cont1++;
					}
					if (exSicumple.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exSicumple);
						contI++;
					} else if (exSicumple1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exSicumple1);
						cont1++;
					}
					if (exImprimir.test(arrayPreToken1[i])) {
						arrayPreTokensIdentificadores[contI] = arrayPreToken1[i].match(exImprimir);
						contI++;
					} else if (exImprimir1.test(arrayPreToken1[i])) {
						arrayPreTokensPalabrasReservadas[cont1] = arrayPreToken1[i].match(exImprimir1);
						cont1++;
					}


				}
				
				//identificadores
				var exIdentificador = /_+[a-zA-Z]*[0-9]*[a-zA-Z]*|[a-zA-Z]+[0-9]*[a-zA-Z]*/;
				var arrayPreTokensIdentificadores1 = [];
				var arrayErrores = [];
				var longitudArrayPreTokensIdentificadores = arrayPreTokensIdentificadores.length;
				var cont2 = 0;
				var contE = 0;
				for (var i = 0; i < longitudArrayPreTokensIdentificadores; i++) {
					if (exIdentificador.test(arrayPreTokensIdentificadores[i])) {
						arrayPreTokensIdentificadores1[cont2] = arrayPreToken1[i].match(exIdentificador);
						cont2++;
					} else {
						arrayErrores[contE] = arrayPreTokensIdentificadores[i];
						contE++;
					}
				}

				//operadores
				var arrayPreTokensOperadores = [];
				var cont2 = 0;
				for (var i = 0; i < longitudArrayPreToken; i++) {
					if (arrayPreToken[i] == '*' || arrayPreToken[i] == '/' || arrayPreToken[i] == '+' ||
						arrayPreToken[i] == '-'
					) {
						arrayPreTokensOperadores[cont2] = arrayPreToken[i];
						cont2++;
					}
				}

				htmlAnalisisLexico += '<table>';
				htmlAnalisisLexico += '<tr>'
				htmlAnalisisLexico += '<th>Tokens</th>'
				htmlAnalisisLexico += '<th>Categoría</th>'
				htmlAnalisisLexico += '</tr>'

				for (var index = 0; index < arrayPreTokensDelimitadores.length; index++) {

					htmlAnalisisLexico += '<tr>';
					htmlAnalisisLexico += '<td>' + arrayPreTokensDelimitadores[index] + '</td>';
					htmlAnalisisLexico += '<td>Delimitador</td>';
					htmlAnalisisLexico += '</tr>';

				}
				for (var index = 0; index < arrayPreTokensPalabrasReservadas.length; index++) {

					htmlAnalisisLexico += '<tr>';
					htmlAnalisisLexico += '<td>' + arrayPreTokensPalabrasReservadas[index] + '</td>';
					htmlAnalisisLexico += '<td>Palabra Reservada</td>';
					htmlAnalisisLexico += '</tr>';

				}
				for (var index = 0; index < arrayPreTokensIdentificadores1.length; index++) {

					htmlAnalisisLexico += '<tr>';
					htmlAnalisisLexico += '<td>' + arrayPreTokensIdentificadores1[index] + '</td>';
					htmlAnalisisLexico += '<td>Identificador</td>';
					htmlAnalisisLexico += '</tr>';

				}
				for (var index = 0; index < arrayPreTokensOperadores.length; index++) {

					htmlAnalisisLexico += '<tr>';
					htmlAnalisisLexico += '<td>' + arrayPreTokensOperadores[index] + '</td>';
					htmlAnalisisLexico += '<td>Operadores</td>';
					htmlAnalisisLexico += '</tr>';

				}
				for (var index = 0; index < arrayErrores.length; index++) {

					htmlAnalisisLexico += '<tr>';
					htmlAnalisisLexico += '<td>' + arrayErrores[index] + '</td>';
					htmlAnalisisLexico += '<td>No identificado</td>';
					htmlAnalisisLexico += '</tr>';

				}

				$('#analisisLexico').html(htmlAnalisisLexico);

				htmlAnalisisLexico += '</table>';
			}







			function borrarCodigo() {

				var codigoArea_text = $('#codigo');

				var codigoArea = codigoArea_text.val();

				if (codigoArea == '') {
					alert("No hay nada que borrar");
					codigoArea_text.focus();
				} else {
					codigoArea_text.val('');
					document.getElementById("codeLine").innerHTML = '';
					var pl = document.createElement('p');
					pl.innerHTML = 1;
					document.getElementById("codeLine").appendChild(pl);
				}
			}

		});
	</script>
</head>

<body>
	<header>
		<main>
			<figure>
				<img src="images/logo.jpg">
			</figure>
			<h1>Proyecto LC++</h1>
		</main>
	</header>
	<section>
		<article id="areaCodigo">
			<form id="codeform">
				<fieldset>
					<legend>Escribe tu Código aquí: </legend>
					<textarea id="codigo" placeholder="Ingrese el código..." name="comment" form="codeform"></textarea>
				</fieldset>
			</form>
			<article id="areaResultados">
				<fieldset>
					<legend>Resultados: </legend>
					<textarea id="resultados" placeholder="Resultados..." name="comment" form="codeform" disabled=true></textarea>
				</fieldset>
			</article>
			<aside id="codeLine">
				<p>1</p>
			</aside>
		</article>
		<article id="areaAnalisis">
			<article id="areaAnalisisLexico">
				<fieldset>
					<legend>Análisis Léxico: </legend>
					<div id="analisisLexico"></div>
					<div id="botones1">
						<input type="button" id="analisisLexico-boton" value="Análisis Léxico" />
					</div>
					<div id="botones5">
						<input type="button" id="resultado-boton" value="Correr" />
						<input type="button" id="borrar-boton" value="Borrar" />
						<input type="button" id="ayuda-boton" value="Ayuda" />
					</div>
				</fieldset>
			</article>
			<article id="areaAnalisisSintactico">
				<fieldset>
					<legend>Análisis Sintáctico: </legend>
					<textarea id="analisisSintactico" disabled=true></textarea>
					<div id="botones2">
						<input type="button" id="analisisSintactico-boton" value="Análisis Sintáctico" />
					</div>
				</fieldset>
			</article>
			<article id="areaAnalisisSemantico">
				<fieldset>
					<legend>Análisis Semántico: </legend>
					<textarea id="analisisSemantico" disabled=true></textarea>
					<div id="botones3">
						<input type="button" id="analisisSemantico-boton" value="Análisis Semántico" />
					</div>
				</fieldset>
			</article>
			<article id="areaTablaSimbolos">
				<fieldset>
					<legend>Tabla de Símbolos: </legend>
					<textarea id="tablaSimbolos" disabled=true></textarea>
					<div id="botones4">
						<input type="button" id="tablaSimbolos-boton" value="Tabla de Símbolos" />
					</div>
				</fieldset>
			</article>
		</article>
		<!--
		<article id="areaErrores"></article>
		-->
	</section>
	<footer>
		<!-- JavaScript -->
		<script type="text/javascript" src="js/lcjs.js"></script>
	</footer>
</body>

</html>